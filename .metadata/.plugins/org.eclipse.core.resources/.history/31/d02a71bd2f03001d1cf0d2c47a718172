package com.model;

import java.sql.ResultSet;
import java.sql.SQLException;
import java.util.HashMap;
import java.util.Map;

import org.springframework.dao.DataAccessException;
import org.springframework.jdbc.core.ResultSetExtractor;

public class CustomerExtractor  implements ResultSetExtractor<Map<Long, Customer>>{

	@Override
	public Map<Long, Customer> extractData(ResultSet rs) throws SQLException, DataAccessException {
		// TODO Auto-generated method stub
		
		
		Map<Long, Customer> employeesMap = new HashMap<>();

		while (rs.next()) {
		String country = rs.getString("country");
		String employeeName = rs.getString("employee");

		List<String> employees = employeesMap.get(country);

		            if (employees == null) {
		List<String> newEmployees = new ArrayList<>();

		              newEmployees.add(employeeName);
		employeesMap.put(country, newEmployees);
		            } else {
		 employees.add(employeeName);
		            }
		        }
		        return employeesMap;
		
		
		return null;
	}

}
